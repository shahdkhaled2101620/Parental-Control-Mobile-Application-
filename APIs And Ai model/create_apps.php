<?phprequire_once 'db_connection.php'; // Include the database connection// Get JSON data from the request body$input = file_get_contents("php://input");if (empty($input)) {    echo json_encode(["status" => "error", "message" => "No data received."]);    exit;}$data = json_decode($input, true);if (json_last_error() !== JSON_ERROR_NONE || !is_array($data)) {    echo json_encode(["status" => "error", "message" => "Invalid JSON format."]);    exit;}// Initialize response array$response = [];$app_ids = [];$all_successful = true;foreach ($data as $app_data) {    // Extract input fields    $app_name = trim($app_data['app_name'] ?? '');    $parent_id = intval($app_data['parent_id'] ?? 0);    // Validate input    if (empty($app_name) || empty($parent_id)) {        $response[] = [            "app_name" => $app_name,            "status" => "error",            "message" => "App name and Parent ID are required."        ];        $all_successful = false;        continue;    }    // Default values for app_status and limit_time    $app_status = 1; // TRUE = 1 (active by default)    $limit_time = "01:00:00"; // Default time limit of 1 hour    // Prepare and execute the SQL query    $stmt = $conn->prepare("INSERT INTO Apps (App_Name, App_Status, Parent_ID, Limit_Time) VALUES (?, ?, ?, ?)");    if (!$stmt) {        $response[] = [            "app_name" => $app_name,            "status" => "error",            "message" => "Failed to prepare statement: " . $conn->error        ];        $all_successful = false;        continue;    }    $stmt->bind_param("siss", $app_name, $app_status, $parent_id, $limit_time);    if ($stmt->execute()) {        $app_id = $stmt->insert_id; // Get the ID of the newly created app        $app_ids[] = $app_id; // Add the App_ID to the list        $response[] = [            "app_name" => $app_name,            "status" => "success",            "message" => "App created successfully with a default time limit of 1 hour.",            "app_id" => $app_id        ];    } else {        $response[] = [            "app_name" => $app_name,            "status" => "error",            "message" => "Failed to create app: " . $stmt->error        ];        $all_successful = false;    }    // Close the statement    $stmt->close();}// Return the final responseif ($all_successful) {    echo json_encode([        "status" => "success",        "message" => "All apps created successfully with a default time limit of 1 hour.",        "app_ids" => $app_ids // Return only the App_IDs    ]);} else {    echo json_encode([        "status" => "partial",        "message" => "Some apps failed to create.",        "details" => $response    ]);}// Close the database connection$conn->close();?>